package com.example.phr.config; import com.example.phr.model.Doctor; import com.example.phr.model.Patient; import com.example.phr.model.Appointment; import com.example.phr.repository.DoctorRepository; import com.example.phr.repository.PatientRepository; import com.example.phr.repository.AppointmentRepository; import org.springframework.boot.CommandLineRunner; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; import java.time.LocalDate; import java.time.LocalDateTime;
@Configuration public class DataLoader { @Bean CommandLineRunner init(DoctorRepository dr, PatientRepository pr, AppointmentRepository ar){ return args -> { if(dr.count()==0){ Doctor d1 = dr.save(new Doctor("Dr. Ramesh Kumar","General Physician")); Doctor d2 = dr.save(new Doctor("Dr. Sunita Sharma","Dentist")); pr.save(new Patient("Manoj Kumar","manoj@example.com","9876543210", LocalDate.of(1990,1,1))); ar.save(new Appointment(pr.findAll().get(0), d1, LocalDateTime.now().plusDays(1), "BOOKED")); } }; } }
